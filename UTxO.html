<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">----------------------------------------------</a>
<a id="48" class="Comment">-- ** Basic definition for UTxO-based ledgers.</a>

<a id="96" class="Keyword">module</a> <a id="103" href="UTxO.html" class="Module">UTxO</a> <a id="108" class="Keyword">where</a>

<a id="115" class="Keyword">open</a> <a id="120" class="Keyword">import</a> <a id="127" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="168" class="Keyword">open</a> <a id="173" class="Keyword">import</a> <a id="180" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Prelude.Sets.html" class="Module">Prelude.Sets</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="243" class="Keyword">open</a> <a id="248" class="Keyword">import</a> <a id="255" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="269" class="Keyword">open</a> <a id="274" class="Keyword">import</a> <a id="281" href="Prelude.DecLists.html" class="Module">Prelude.DecLists</a>
<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Prelude.Functor.html" class="Module">Prelude.Functor</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>

<a id="Value"></a><a id="359" href="UTxO.html#359" class="Function">Value</a>   <a id="367" class="Symbol">=</a> <a id="369" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="HashId"></a><a id="371" href="UTxO.html#371" class="Function">HashId</a>  <a id="379" class="Symbol">=</a> <a id="381" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="Address"></a><a id="383" href="UTxO.html#383" class="Function">Address</a> <a id="391" class="Symbol">=</a> <a id="393" href="UTxO.html#371" class="Function">HashId</a>
<a id="400" class="Keyword">postulate</a> <a id="_♯"></a><a id="410" href="UTxO.html#410" class="Postulate Operator">_♯</a> <a id="413" class="Symbol">:</a> <a id="415" class="Symbol">∀</a> <a id="417" class="Symbol">{</a><a id="418" href="UTxO.html#418" class="Bound">A</a> <a id="420" class="Symbol">:</a> <a id="422" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="426" href="Prelude.Init.html#194" class="Generalizable">ℓ</a><a id="427" class="Symbol">}</a> <a id="429" class="Symbol">→</a> <a id="431" href="UTxO.html#418" class="Bound">A</a> <a id="433" class="Symbol">→</a> <a id="435" href="UTxO.html#371" class="Function">HashId</a>

<a id="DATA"></a><a id="443" href="UTxO.html#443" class="Function">DATA</a> <a id="448" class="Symbol">=</a> <a id="450" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="452" class="Comment">-- T0D0: more realistic data for redeemers</a>

<a id="496" class="Keyword">record</a> <a id="TxOutputRef"></a><a id="503" href="UTxO.html#503" class="Record">TxOutputRef</a> <a id="515" class="Symbol">:</a> <a id="517" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="521" class="Keyword">where</a>
  <a id="529" class="Keyword">constructor</a> <a id="_indexed-at_"></a><a id="541" href="UTxO.html#541" class="InductiveConstructor Operator">_indexed-at_</a>
  <a id="556" class="Keyword">field</a> <a id="TxOutputRef.txId"></a><a id="562" href="UTxO.html#562" class="Field">txId</a>  <a id="568" class="Symbol">:</a> <a id="570" href="UTxO.html#371" class="Function">HashId</a>
        <a id="TxOutputRef.index"></a><a id="585" href="UTxO.html#585" class="Field">index</a> <a id="591" class="Symbol">:</a> <a id="593" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="595" class="Keyword">open</a> <a id="600" href="UTxO.html#503" class="Module">TxOutputRef</a> <a id="612" class="Keyword">public</a>
<a id="619" class="Keyword">unquoteDecl</a> <a id="DecEq-TxOR"></a><a id="631" href="UTxO.html#631" class="Function">DecEq-TxOR</a> <a id="642" class="Symbol">=</a> <a id="644" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="651" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="657" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="659" class="Keyword">quote</a> <a id="665" href="UTxO.html#503" class="Record">TxOutputRef</a> <a id="677" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="679" href="UTxO.html#631" class="Function">DecEq-TxOR</a> <a id="690" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="693" class="Keyword">record</a> <a id="TxOutput"></a><a id="700" href="UTxO.html#700" class="Record">TxOutput</a> <a id="709" class="Symbol">:</a> <a id="711" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="715" class="Keyword">where</a>
  <a id="723" class="Keyword">constructor</a> <a id="_at_"></a><a id="735" href="UTxO.html#735" class="InductiveConstructor Operator">_at_</a>
  <a id="742" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="748" href="UTxO.html#748" class="Field">value</a>    <a id="757" class="Symbol">:</a> <a id="759" href="UTxO.html#359" class="Function">Value</a>
        <a id="TxOutput.address"></a><a id="773" href="UTxO.html#773" class="Field">address</a>  <a id="782" class="Symbol">:</a> <a id="784" href="UTxO.html#383" class="Function">Address</a>
<a id="792" class="Keyword">open</a> <a id="797" href="UTxO.html#700" class="Module">TxOutput</a> <a id="806" class="Keyword">public</a>
<a id="813" class="Keyword">unquoteDecl</a> <a id="DecEq-TxO"></a><a id="825" href="UTxO.html#825" class="Function">DecEq-TxO</a> <a id="835" class="Symbol">=</a> <a id="837" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="844" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="850" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="852" class="Keyword">quote</a> <a id="858" href="UTxO.html#700" class="Record">TxOutput</a> <a id="867" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="869" href="UTxO.html#825" class="Function">DecEq-TxO</a> <a id="879" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="882" class="Keyword">record</a> <a id="InputInfo"></a><a id="889" href="UTxO.html#889" class="Record">InputInfo</a> <a id="899" class="Symbol">:</a> <a id="901" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="905" class="Keyword">where</a>
  <a id="913" class="Keyword">field</a> <a id="InputInfo.outputRef"></a><a id="919" href="UTxO.html#919" class="Field">outputRef</a>     <a id="933" class="Symbol">:</a> <a id="935" href="UTxO.html#503" class="Record">TxOutputRef</a>
        <a id="InputInfo.validatorHash"></a><a id="955" href="UTxO.html#955" class="Field">validatorHash</a> <a id="969" class="Symbol">:</a> <a id="971" href="UTxO.html#371" class="Function">HashId</a>
        <a id="InputInfo.redeemerHash"></a><a id="986" href="UTxO.html#986" class="Field">redeemerHash</a>  <a id="1000" class="Symbol">:</a> <a id="1002" href="UTxO.html#371" class="Function">HashId</a>

<a id="1010" class="Keyword">record</a> <a id="TxInfo"></a><a id="1017" href="UTxO.html#1017" class="Record">TxInfo</a> <a id="1024" class="Symbol">:</a> <a id="1026" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1030" class="Keyword">where</a>
  <a id="1038" class="Keyword">field</a> <a id="TxInfo.inputs"></a><a id="1044" href="UTxO.html#1044" class="Field">inputs</a>  <a id="1052" class="Symbol">:</a> <a id="1054" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1059" href="UTxO.html#889" class="Record">InputInfo</a>
        <a id="TxInfo.outputs"></a><a id="1077" href="UTxO.html#1077" class="Field">outputs</a> <a id="1085" class="Symbol">:</a> <a id="1087" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1092" href="UTxO.html#700" class="Record">TxOutput</a>
        <a id="TxInfo.forge"></a><a id="1109" href="UTxO.html#1109" class="Field">forge</a>   <a id="1117" class="Symbol">:</a> <a id="1119" href="UTxO.html#359" class="Function">Value</a>

<a id="1126" class="Keyword">record</a> <a id="TxInput"></a><a id="1133" href="UTxO.html#1133" class="Record">TxInput</a> <a id="1141" class="Symbol">:</a> <a id="1143" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1147" class="Keyword">where</a>
  <a id="1155" class="Keyword">field</a> <a id="TxInput.outputRef"></a><a id="1161" href="UTxO.html#1161" class="Field">outputRef</a> <a id="1171" class="Symbol">:</a> <a id="1173" href="UTxO.html#503" class="Record">TxOutputRef</a>
        <a id="TxInput.validator"></a><a id="1193" href="UTxO.html#1193" class="Field">validator</a> <a id="1203" class="Symbol">:</a> <a id="1205" href="UTxO.html#1017" class="Record">TxInfo</a> <a id="1212" class="Symbol">→</a> <a id="1214" href="UTxO.html#443" class="Function">DATA</a> <a id="1219" class="Symbol">→</a> <a id="1221" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
        <a id="TxInput.redeemer"></a><a id="1234" href="UTxO.html#1234" class="Field">redeemer</a>  <a id="1244" class="Symbol">:</a> <a id="1246" href="UTxO.html#443" class="Function">DATA</a>
<a id="1251" class="Keyword">open</a> <a id="1256" href="UTxO.html#1133" class="Module">TxInput</a> <a id="1264" class="Keyword">public</a>

<a id="mkInputInfo"></a><a id="1272" href="UTxO.html#1272" class="Function">mkInputInfo</a> <a id="1284" class="Symbol">:</a> <a id="1286" href="UTxO.html#1133" class="Record">TxInput</a> <a id="1294" class="Symbol">→</a> <a id="1296" href="UTxO.html#889" class="Record">InputInfo</a>
<a id="1306" href="UTxO.html#1272" class="Function">mkInputInfo</a> <a id="1318" href="UTxO.html#1318" class="Bound">i</a> <a id="1320" class="Symbol">=</a> <a id="1322" class="Keyword">record</a>
  <a id="1331" class="Symbol">{</a> <a id="1333" href="UTxO.html#919" class="Field">outputRef</a>     <a id="1347" class="Symbol">=</a> <a id="1349" href="UTxO.html#1318" class="Bound">i</a> <a id="1351" class="Symbol">.</a><a id="1352" href="UTxO.html#1161" class="Field">outputRef</a>
  <a id="1364" class="Symbol">;</a> <a id="1366" href="UTxO.html#955" class="Field">validatorHash</a> <a id="1380" class="Symbol">=</a> <a id="1382" href="UTxO.html#1318" class="Bound">i</a> <a id="1384" class="Symbol">.</a><a id="1385" href="UTxO.html#1193" class="Field">validator</a> <a id="1395" href="UTxO.html#410" class="Postulate Operator">♯</a>
  <a id="1399" class="Symbol">;</a> <a id="1401" href="UTxO.html#986" class="Field">redeemerHash</a>  <a id="1415" class="Symbol">=</a> <a id="1417" href="UTxO.html#1318" class="Bound">i</a> <a id="1419" class="Symbol">.</a><a id="1420" href="UTxO.html#1234" class="Field">redeemer</a> <a id="1429" href="UTxO.html#410" class="Postulate Operator">♯</a> <a id="1431" class="Symbol">}</a>

<a id="1434" class="Keyword">record</a> <a id="Tx"></a><a id="1441" href="UTxO.html#1441" class="Record">Tx</a> <a id="1444" class="Symbol">:</a> <a id="1446" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1450" class="Keyword">where</a>
  <a id="1458" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="1468" href="UTxO.html#1468" class="Field">inputs</a>  <a id="1476" class="Symbol">:</a> <a id="1478" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1483" href="UTxO.html#1133" class="Record">TxInput</a>
    <a id="Tx.outputs"></a><a id="1495" href="UTxO.html#1495" class="Field">outputs</a> <a id="1503" class="Symbol">:</a> <a id="1505" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1510" href="UTxO.html#700" class="Record">TxOutput</a>
    <a id="Tx.forge"></a><a id="1523" href="UTxO.html#1523" class="Field">forge</a>   <a id="1531" class="Symbol">:</a> <a id="1533" href="UTxO.html#359" class="Function">Value</a>
<a id="1539" class="Keyword">open</a> <a id="1544" href="UTxO.html#1441" class="Module">Tx</a> <a id="1547" class="Keyword">public</a>

<a id="mkTxInfo"></a><a id="1555" href="UTxO.html#1555" class="Function">mkTxInfo</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="UTxO.html#1441" class="Record">Tx</a> <a id="1569" class="Symbol">→</a> <a id="1571" href="UTxO.html#1017" class="Record">TxInfo</a>
<a id="1578" href="UTxO.html#1555" class="Function">mkTxInfo</a> <a id="1587" href="UTxO.html#1587" class="Bound">tx</a> <a id="1590" class="Symbol">=</a> <a id="1592" class="Keyword">record</a>
  <a id="1601" class="Symbol">{</a> <a id="1603" href="UTxO.html#1044" class="Field">inputs</a>  <a id="1611" class="Symbol">=</a> <a id="1613" href="UTxO.html#1272" class="Function">mkInputInfo</a> <a id="1625" href="Prelude.Functor.html#299" class="Field Operator">&lt;$&gt;</a> <a id="1629" href="UTxO.html#1587" class="Bound">tx</a> <a id="1632" class="Symbol">.</a><a id="1633" href="UTxO.html#1468" class="Field">inputs</a>
  <a id="1642" class="Symbol">;</a> <a id="1644" href="UTxO.html#1077" class="Field">outputs</a> <a id="1652" class="Symbol">=</a> <a id="1654" href="UTxO.html#1587" class="Bound">tx</a> <a id="1657" class="Symbol">.</a><a id="1658" href="UTxO.html#1495" class="Field">outputs</a>
  <a id="1668" class="Symbol">;</a> <a id="1670" href="UTxO.html#1109" class="Field">forge</a>   <a id="1678" class="Symbol">=</a> <a id="1680" href="UTxO.html#1587" class="Bound">tx</a> <a id="1683" class="Symbol">.</a><a id="1684" href="UTxO.html#1523" class="Field">forge</a> <a id="1690" class="Symbol">}</a>

<a id="1693" class="Comment">-- A ledger is a list of transactions.</a>
<a id="L"></a><a id="1732" href="UTxO.html#1732" class="Function">L</a> <a id="1734" class="Symbol">=</a> <a id="1736" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1741" href="UTxO.html#1441" class="Record">Tx</a>

<a id="1745" class="Keyword">record</a> <a id="UTXO"></a><a id="1752" href="UTxO.html#1752" class="Record">UTXO</a> <a id="1757" class="Symbol">:</a> <a id="1759" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1763" class="Keyword">where</a>
  <a id="1771" class="Keyword">field</a> <a id="UTXO.outRef"></a><a id="1777" href="UTxO.html#1777" class="Field">outRef</a> <a id="1784" class="Symbol">:</a> <a id="1786" href="UTxO.html#503" class="Record">TxOutputRef</a>
        <a id="UTXO.out"></a><a id="1806" href="UTxO.html#1806" class="Field">out</a>    <a id="1813" class="Symbol">:</a> <a id="1815" href="UTxO.html#700" class="Record">TxOutput</a>
<a id="1824" class="Keyword">unquoteDecl</a> <a id="DecEq-UTXO"></a><a id="1836" href="UTxO.html#1836" class="Function">DecEq-UTXO</a> <a id="1847" class="Symbol">=</a> <a id="1849" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="1856" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="1862" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1864" class="Keyword">quote</a> <a id="1870" href="UTxO.html#1752" class="Record">UTXO</a> <a id="1875" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1877" href="UTxO.html#1836" class="Function">DecEq-UTXO</a> <a id="1888" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="1891" class="Comment">-- The state of a ledger is a collection of unspent transaction outputs.</a>
<a id="S"></a><a id="1964" href="UTxO.html#1964" class="Function">S</a> <a id="1966" class="Symbol">:</a> <a id="1968" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1972" href="UTxO.html#1964" class="Function">S</a> <a id="1974" class="Symbol">=</a> <a id="1976" href="Prelude.Sets.Interface.html#416" class="Function">Set⟨</a> <a id="1981" href="UTxO.html#1752" class="Record">UTXO</a> <a id="1986" href="Prelude.Sets.Interface.html#416" class="Function">⟩</a>

<a id="mkUtxo"></a><a id="1989" href="UTxO.html#1989" class="Function">mkUtxo</a> <a id="1996" class="Symbol">:</a> <a id="1998" class="Symbol">∀</a> <a id="2000" class="Symbol">{</a><a id="2001" href="UTxO.html#2001" class="Bound">out</a><a id="2004" class="Symbol">}</a> <a id="2006" href="UTxO.html#2006" class="Bound">tx</a> <a id="2009" class="Symbol">→</a> <a id="2011" href="UTxO.html#2001" class="Bound">out</a> <a id="2015" href="Data.List.Membership.Setoid.html#887" class="Function Operator">L.Mem.∈</a> <a id="2023" href="UTxO.html#1495" class="Field">outputs</a> <a id="2031" href="UTxO.html#2006" class="Bound">tx</a> <a id="2034" class="Symbol">→</a> <a id="2036" href="UTxO.html#1752" class="Record">UTXO</a>
<a id="2041" href="UTxO.html#1989" class="Function">mkUtxo</a> <a id="2048" class="Symbol">{</a><a id="2049" href="UTxO.html#2049" class="Bound">out</a><a id="2052" class="Symbol">}</a> <a id="2054" href="UTxO.html#2054" class="Bound">tx</a> <a id="2057" href="UTxO.html#2057" class="Bound">out∈</a> <a id="2062" class="Symbol">=</a> <a id="2064" class="Symbol">λ</a> <a id="2066" class="Keyword">where</a>
  <a id="2074" class="Symbol">.</a><a id="2075" href="UTxO.html#1777" class="Field">UTXO.outRef</a> <a id="2087" class="Symbol">→</a> <a id="2089" class="Symbol">(</a><a id="2090" href="UTxO.html#2054" class="Bound">tx</a> <a id="2093" href="UTxO.html#410" class="Postulate Operator">♯</a><a id="2094" class="Symbol">)</a> <a id="2096" href="UTxO.html#541" class="InductiveConstructor Operator">indexed-at</a> <a id="2107" href="Prelude.ToN.html#102" class="Field">toℕ</a> <a id="2111" class="Symbol">(</a><a id="2112" href="Data.List.Relation.Unary.Any.html#1817" class="Function">L.Any.index</a> <a id="2124" href="UTxO.html#2057" class="Bound">out∈</a><a id="2128" class="Symbol">)</a>
  <a id="2132" class="Symbol">.</a><a id="2133" href="UTxO.html#1806" class="Field">UTXO.out</a>    <a id="2145" class="Symbol">→</a> <a id="2147" href="UTxO.html#2049" class="Bound">out</a>

<a id="outputRefs"></a><a id="2152" href="UTxO.html#2152" class="Function">outputRefs</a> <a id="2163" class="Symbol">:</a> <a id="2165" href="UTxO.html#1441" class="Record">Tx</a> <a id="2168" class="Symbol">→</a> <a id="2170" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2175" href="UTxO.html#503" class="Record">TxOutputRef</a>
<a id="2187" href="UTxO.html#2152" class="Function">outputRefs</a> <a id="2198" class="Symbol">=</a> <a id="2200" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2204" href="UTxO.html#1161" class="Field">outputRef</a> <a id="2214" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2216" href="UTxO.html#1468" class="Field">inputs</a>

<a id="getSpentOutputRef"></a><a id="2224" href="UTxO.html#2224" class="Function">getSpentOutputRef</a> <a id="2242" class="Symbol">:</a> <a id="2244" href="UTxO.html#1964" class="Function">S</a> <a id="2246" class="Symbol">→</a> <a id="2248" href="UTxO.html#503" class="Record">TxOutputRef</a> <a id="2260" class="Symbol">→</a> <a id="2262" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2268" href="UTxO.html#700" class="Record">TxOutput</a>
<a id="2277" href="UTxO.html#2224" class="Function">getSpentOutputRef</a> <a id="2295" href="UTxO.html#2295" class="Bound">s</a> <a id="2297" href="UTxO.html#2297" class="Bound">oRef</a> <a id="2302" class="Symbol">=</a> <a id="2304" href="UTxO.html#2330" class="Function">go</a> <a id="2307" class="Symbol">(</a><a id="2308" href="Prelude.Sets.Interface.html#3955" class="Function">toList</a> <a id="2315" href="UTxO.html#2295" class="Bound">s</a><a id="2316" class="Symbol">)</a>
  <a id="2320" class="Keyword">where</a>
    <a id="2330" href="UTxO.html#2330" class="Function">go</a> <a id="2333" class="Symbol">:</a> <a id="2335" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2340" href="UTxO.html#1752" class="Record">UTXO</a> <a id="2345" class="Symbol">→</a> <a id="2347" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2353" href="UTxO.html#700" class="Record">TxOutput</a>
    <a id="2366" href="UTxO.html#2330" class="Function">go</a> <a id="2369" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="2372" class="Symbol">=</a> <a id="2374" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
    <a id="2386" href="UTxO.html#2330" class="Function">go</a> <a id="2389" class="Symbol">(</a><a id="2390" class="Keyword">record</a> <a id="2397" class="Symbol">{</a><a id="2398" href="UTxO.html#1777" class="Field">outRef</a> <a id="2405" class="Symbol">=</a> <a id="2407" href="UTxO.html#2407" class="Bound">or</a><a id="2409" class="Symbol">;</a> <a id="2411" href="UTxO.html#1806" class="Field">out</a> <a id="2415" class="Symbol">=</a> <a id="2417" href="UTxO.html#2417" class="Bound">o</a><a id="2418" class="Symbol">}</a> <a id="2420" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2422" href="UTxO.html#2422" class="Bound">xs</a><a id="2424" class="Symbol">)</a> <a id="2426" class="Symbol">=</a>
      <a id="2434" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="2437" href="UTxO.html#2297" class="Bound">oRef</a> <a id="2442" href="Prelude.DecEq.Core.html#173" class="Function Operator">==</a> <a id="2445" href="UTxO.html#2407" class="Bound">or</a> <a id="2448" href="Data.Bool.Base.html#1283" class="Function Operator">then</a>
        <a id="2461" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2466" href="UTxO.html#2417" class="Bound">o</a>
      <a id="2474" href="Data.Bool.Base.html#1283" class="Function Operator">else</a>
        <a id="2487" href="UTxO.html#2330" class="Function">go</a> <a id="2490" href="UTxO.html#2422" class="Bound">xs</a>

<a id="getSpentOutput"></a><a id="2494" href="UTxO.html#2494" class="Function">getSpentOutput</a> <a id="2509" class="Symbol">:</a> <a id="2511" href="UTxO.html#1964" class="Function">S</a> <a id="2513" class="Symbol">→</a> <a id="2515" href="UTxO.html#1133" class="Record">TxInput</a> <a id="2523" class="Symbol">→</a> <a id="2525" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2531" href="UTxO.html#700" class="Record">TxOutput</a>
<a id="2540" href="UTxO.html#2494" class="Function">getSpentOutput</a> <a id="2555" href="UTxO.html#2555" class="Bound">s</a> <a id="2557" href="UTxO.html#2557" class="Bound">i</a> <a id="2559" class="Symbol">=</a> <a id="2561" href="UTxO.html#2224" class="Function">getSpentOutputRef</a> <a id="2579" href="UTxO.html#2555" class="Bound">s</a> <a id="2581" class="Symbol">(</a><a id="2582" href="UTxO.html#2557" class="Bound">i</a> <a id="2584" class="Symbol">.</a><a id="2585" href="UTxO.html#1161" class="Field">outputRef</a><a id="2594" class="Symbol">)</a>

<a id="∑"></a><a id="2597" href="UTxO.html#2597" class="Function">∑</a> <a id="2599" class="Symbol">:</a> <a id="2601" class="Symbol">∀</a> <a id="2603" class="Symbol">{</a><a id="2604" href="UTxO.html#2604" class="Bound">A</a> <a id="2606" class="Symbol">:</a> <a id="2608" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="2611" class="Symbol">}</a> <a id="2613" class="Symbol">→</a> <a id="2615" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2620" href="UTxO.html#2604" class="Bound">A</a> <a id="2622" class="Symbol">→</a> <a id="2624" class="Symbol">(</a><a id="2625" href="UTxO.html#2604" class="Bound">A</a> <a id="2627" class="Symbol">→</a> <a id="2629" href="UTxO.html#359" class="Function">Value</a><a id="2634" class="Symbol">)</a> <a id="2636" class="Symbol">→</a> <a id="2638" href="UTxO.html#359" class="Function">Value</a>
<a id="2644" href="UTxO.html#2597" class="Function">∑</a> <a id="2646" href="UTxO.html#2646" class="Bound">xs</a> <a id="2649" href="UTxO.html#2649" class="Bound">f</a> <a id="2651" class="Symbol">=</a> <a id="2653" href="Prelude.Lists.html#28613" class="Function">∑ℕ</a> <a id="2656" class="Symbol">(</a><a id="2657" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2661" href="UTxO.html#2649" class="Bound">f</a> <a id="2663" href="UTxO.html#2646" class="Bound">xs</a><a id="2665" class="Symbol">)</a>

<a id="∑M"></a><a id="2668" href="UTxO.html#2668" class="Function">∑M</a> <a id="2671" class="Symbol">:</a> <a id="2673" class="Symbol">∀</a> <a id="2675" class="Symbol">{</a><a id="2676" href="UTxO.html#2676" class="Bound">A</a> <a id="2678" class="Symbol">:</a> <a id="2680" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="2683" class="Symbol">}</a> <a id="2685" class="Symbol">→</a> <a id="2687" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2692" class="Symbol">(</a><a id="2693" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2699" href="UTxO.html#2676" class="Bound">A</a><a id="2700" class="Symbol">)</a> <a id="2702" class="Symbol">→</a> <a id="2704" class="Symbol">(</a><a id="2705" href="UTxO.html#2676" class="Bound">A</a> <a id="2707" class="Symbol">→</a> <a id="2709" href="UTxO.html#359" class="Function">Value</a><a id="2714" class="Symbol">)</a> <a id="2716" class="Symbol">→</a> <a id="2718" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2724" href="UTxO.html#359" class="Function">Value</a>
<a id="2730" href="UTxO.html#2668" class="Function">∑M</a> <a id="2733" href="UTxO.html#2733" class="Bound">xs</a> <a id="2736" href="UTxO.html#2736" class="Bound">f</a> <a id="2738" class="Symbol">=</a> <a id="2740" class="Symbol">(</a><a id="2741" href="Function.Base.html#1554" class="Function">flip</a> <a id="2746" href="UTxO.html#2597" class="Function">∑</a> <a id="2748" href="UTxO.html#2736" class="Bound">f</a><a id="2749" class="Symbol">)</a> <a id="2751" href="Prelude.Functor.html#299" class="Field Operator">&lt;$&gt;</a> <a id="2755" href="UTxO.html#2812" class="Function">seqM</a> <a id="2760" href="UTxO.html#2733" class="Bound">xs</a>
  <a id="2765" class="Keyword">where</a>
    <a id="2775" class="Comment">-- if one fails everything fails</a>
    <a id="2812" href="UTxO.html#2812" class="Function">seqM</a> <a id="2817" class="Symbol">:</a> <a id="2819" class="Symbol">∀</a> <a id="2821" class="Symbol">{</a><a id="2822" href="UTxO.html#2822" class="Bound">A</a> <a id="2824" class="Symbol">:</a> <a id="2826" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="2829" class="Symbol">}</a> <a id="2831" class="Symbol">→</a> <a id="2833" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2838" class="Symbol">(</a><a id="2839" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2845" href="UTxO.html#2822" class="Bound">A</a><a id="2846" class="Symbol">)</a> <a id="2848" class="Symbol">→</a> <a id="2850" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2856" class="Symbol">(</a><a id="2857" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2862" href="UTxO.html#2822" class="Bound">A</a><a id="2863" class="Symbol">)</a>
    <a id="2869" href="UTxO.html#2812" class="Function">seqM</a> <a id="2874" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>       <a id="2883" class="Symbol">=</a> <a id="2885" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2890" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
    <a id="2897" href="UTxO.html#2812" class="Function">seqM</a> <a id="2902" class="Symbol">(</a><a id="2903" href="UTxO.html#2903" class="Bound">x</a> <a id="2905" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2907" href="UTxO.html#2907" class="Bound">xs</a><a id="2909" class="Symbol">)</a> <a id="2911" class="Symbol">=</a> <a id="2913" class="Symbol">⦇</a> <a id="2915" href="UTxO.html#2903" class="Bound">x</a> <a id="2917" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2919" href="UTxO.html#2812" class="Function">seqM</a> <a id="2924" href="UTxO.html#2907" class="Bound">xs</a> <a id="2927" class="Symbol">⦈</a>

<a id="2930" class="Keyword">record</a> <a id="IsValidTx"></a><a id="2937" href="UTxO.html#2937" class="Record">IsValidTx</a> <a id="2947" class="Symbol">(</a><a id="2948" href="UTxO.html#2948" class="Bound">tx</a> <a id="2951" class="Symbol">:</a> <a id="2953" href="UTxO.html#1441" class="Record">Tx</a><a id="2955" class="Symbol">)</a> <a id="2957" class="Symbol">(</a><a id="2958" href="UTxO.html#2958" class="Bound">utxos</a> <a id="2964" class="Symbol">:</a> <a id="2966" href="UTxO.html#1964" class="Function">S</a><a id="2967" class="Symbol">)</a> <a id="2969" class="Symbol">:</a> <a id="2971" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2975" class="Keyword">where</a>
  <a id="2983" class="Keyword">field</a>
    <a id="IsValidTx.validOutputRefs"></a><a id="2993" href="UTxO.html#2993" class="Field">validOutputRefs</a> <a id="3009" class="Symbol">:</a>
      <a id="3017" href="UTxO.html#2152" class="Function">outputRefs</a> <a id="3028" href="UTxO.html#2948" class="Bound">tx</a> <a id="3031" href="Data.List.Relation.Binary.Subset.Setoid.html#739" class="Function Operator">⊆</a> <a id="3033" href="Data.List.Base.html#1544" class="Function">map</a> <a id="3037" href="UTxO.html#1777" class="Field">UTXO.outRef</a> <a id="3049" class="Symbol">(</a><a id="3050" href="Prelude.Sets.Interface.html#3955" class="Function">toList</a> <a id="3057" href="UTxO.html#2958" class="Bound">utxos</a><a id="3062" class="Symbol">)</a>

    <a id="IsValidTx.preservesValues"></a><a id="3069" href="UTxO.html#3069" class="Field">preservesValues</a> <a id="3085" class="Symbol">:</a>
      <a id="3093" href="Data.Maybe.Relation.Unary.Any.html#830" class="Datatype">M.Any.Any</a> <a id="3103" class="Symbol">(λ</a> <a id="3106" href="UTxO.html#3106" class="Bound">q</a> <a id="3108" class="Symbol">→</a> <a id="3110" href="UTxO.html#2948" class="Bound">tx</a> <a id="3113" class="Symbol">.</a><a id="3114" href="UTxO.html#1523" class="Field">forge</a> <a id="3120" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="3122" href="UTxO.html#3106" class="Bound">q</a> <a id="3124" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3126" href="UTxO.html#2597" class="Function">∑</a> <a id="3128" class="Symbol">(</a><a id="3129" href="UTxO.html#2948" class="Bound">tx</a> <a id="3132" class="Symbol">.</a><a id="3133" href="UTxO.html#1495" class="Field">outputs</a><a id="3140" class="Symbol">)</a> <a id="3142" href="UTxO.html#748" class="Field">value</a><a id="3147" class="Symbol">)</a>
                <a id="3165" class="Symbol">(</a><a id="3166" href="UTxO.html#2668" class="Function">∑M</a> <a id="3169" class="Symbol">(</a><a id="3170" href="Data.List.Base.html#1544" class="Function">map</a> <a id="3174" class="Symbol">(</a><a id="3175" href="UTxO.html#2494" class="Function">getSpentOutput</a> <a id="3190" href="UTxO.html#2958" class="Bound">utxos</a><a id="3195" class="Symbol">)</a> <a id="3197" class="Symbol">(</a><a id="3198" href="UTxO.html#2948" class="Bound">tx</a> <a id="3201" class="Symbol">.</a><a id="3202" href="UTxO.html#1468" class="Field">inputs</a><a id="3208" class="Symbol">))</a> <a id="3211" href="UTxO.html#748" class="Field">value</a><a id="3216" class="Symbol">)</a>

    <a id="IsValidTx.noDoubleSpending"></a><a id="3223" href="UTxO.html#3223" class="Field">noDoubleSpending</a> <a id="3240" class="Symbol">:</a>
      <a id="3248" href="Data.List.Relation.Unary.Unique.Setoid.html#719" class="Datatype">Unique</a> <a id="3255" class="Symbol">(</a><a id="3256" href="UTxO.html#2152" class="Function">outputRefs</a> <a id="3267" href="UTxO.html#2948" class="Bound">tx</a><a id="3269" class="Symbol">)</a>

    <a id="IsValidTx.allInputsValidate"></a><a id="3276" href="UTxO.html#3276" class="Field">allInputsValidate</a> <a id="3294" class="Symbol">:</a>
      <a id="3302" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="3306" class="Symbol">(λ</a> <a id="3309" href="UTxO.html#3309" class="Bound">i</a> <a id="3311" class="Symbol">→</a> <a id="3313" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="3315" class="Symbol">(</a><a id="3316" href="UTxO.html#1193" class="Field">validator</a> <a id="3326" href="UTxO.html#3309" class="Bound">i</a> <a id="3328" class="Symbol">(</a><a id="3329" href="UTxO.html#1555" class="Function">mkTxInfo</a> <a id="3338" href="UTxO.html#2948" class="Bound">tx</a><a id="3340" class="Symbol">)</a> <a id="3342" class="Symbol">(</a><a id="3343" href="UTxO.html#3309" class="Bound">i</a> <a id="3345" class="Symbol">.</a><a id="3346" href="UTxO.html#1234" class="Field">redeemer</a><a id="3354" class="Symbol">)))</a>
          <a id="3368" class="Symbol">(</a><a id="3369" href="UTxO.html#2948" class="Bound">tx</a> <a id="3372" class="Symbol">.</a><a id="3373" href="UTxO.html#1468" class="Field">inputs</a><a id="3379" class="Symbol">)</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="3386" href="UTxO.html#3386" class="Field">validateValidHashes</a> <a id="3406" class="Symbol">:</a>
      <a id="3414" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="3418" class="Symbol">(λ</a> <a id="3421" href="UTxO.html#3421" class="Bound">i</a> <a id="3423" class="Symbol">→</a> <a id="3425" href="Data.Maybe.Relation.Unary.Any.html#830" class="Datatype">M.Any.Any</a> <a id="3435" class="Symbol">(λ</a> <a id="3438" href="UTxO.html#3438" class="Bound">o</a> <a id="3440" class="Symbol">→</a> <a id="3442" href="UTxO.html#3438" class="Bound">o</a> <a id="3444" class="Symbol">.</a><a id="3445" href="UTxO.html#773" class="Field">address</a> <a id="3453" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3455" href="UTxO.html#3421" class="Bound">i</a> <a id="3457" class="Symbol">.</a><a id="3458" href="UTxO.html#1193" class="Field">validator</a> <a id="3468" href="UTxO.html#410" class="Postulate Operator">♯</a><a id="3469" class="Symbol">)</a> <a id="3471" class="Symbol">(</a><a id="3472" href="UTxO.html#2494" class="Function">getSpentOutput</a> <a id="3487" href="UTxO.html#2958" class="Bound">utxos</a> <a id="3493" href="UTxO.html#3421" class="Bound">i</a><a id="3494" class="Symbol">))</a>
          <a id="3507" class="Symbol">(</a><a id="3508" href="UTxO.html#2948" class="Bound">tx</a> <a id="3511" class="Symbol">.</a><a id="3512" href="UTxO.html#1468" class="Field">inputs</a><a id="3518" class="Symbol">)</a>

<a id="3521" class="Keyword">open</a> <a id="3526" href="UTxO.html#2937" class="Module">IsValidTx</a> <a id="3536" class="Keyword">public</a>

<a id="isValidTx?"></a><a id="3544" href="UTxO.html#3544" class="Function">isValidTx?</a> <a id="3555" class="Symbol">:</a> <a id="3557" class="Symbol">∀</a> <a id="3559" href="UTxO.html#3559" class="Bound">tx</a> <a id="3562" href="UTxO.html#3562" class="Bound">s</a> <a id="3564" class="Symbol">→</a> <a id="3566" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="3570" class="Symbol">(</a><a id="3571" href="UTxO.html#2937" class="Record">IsValidTx</a> <a id="3581" href="UTxO.html#3559" class="Bound">tx</a> <a id="3584" href="UTxO.html#3562" class="Bound">s</a><a id="3585" class="Symbol">)</a>
<a id="3587" href="UTxO.html#3544" class="Function">isValidTx?</a> <a id="3598" href="UTxO.html#3598" class="Bound">tx</a> <a id="3601" href="UTxO.html#3601" class="Bound">utxos</a>
  <a id="3609" class="Keyword">with</a> <a id="3614" href="UTxO.html#2152" class="Function">outputRefs</a> <a id="3625" href="UTxO.html#3598" class="Bound">tx</a> <a id="3628" href="Prelude.DecLists.html#253" class="Function Operator">⊆?</a> <a id="3631" href="Data.List.Base.html#1544" class="Function">map</a> <a id="3635" href="UTxO.html#1777" class="Field">UTXO.outRef</a> <a id="3647" class="Symbol">(</a><a id="3648" href="Prelude.Sets.Interface.html#3955" class="Function">toList</a> <a id="3655" href="UTxO.html#3601" class="Bound">utxos</a><a id="3660" class="Symbol">)</a>
<a id="3662" class="Symbol">...</a> <a id="3666" class="Symbol">|</a> <a id="3668" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3671" href="UTxO.html#3671" class="Bound">¬p</a> <a id="3674" class="Symbol">=</a> <a id="3676" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3679" class="Symbol">(</a><a id="3680" href="UTxO.html#3671" class="Bound">¬p</a> <a id="3683" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3685" href="UTxO.html#2993" class="Field">validOutputRefs</a> <a id="3701" class="Symbol">)</a>
<a id="3703" class="Symbol">...</a> <a id="3707" class="Symbol">|</a> <a id="3709" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3713" href="UTxO.html#3713" class="Bound">p₁</a>
  <a id="3718" class="Keyword">with</a> <a id="3723" href="Data.Maybe.Relation.Unary.Any.html#2128" class="Function">M.Any.dec</a> <a id="3733" class="Symbol">(λ</a> <a id="3736" href="UTxO.html#3736" class="Bound">q</a> <a id="3738" class="Symbol">→</a> <a id="3740" class="Bound">tx</a> <a id="3743" class="Symbol">.</a><a id="3744" href="UTxO.html#1523" class="Field">forge</a> <a id="3750" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="3752" href="UTxO.html#3736" class="Bound">q</a> <a id="3754" href="Prelude.DecEq.Core.html#141" class="Field Operator">≟</a> <a id="3756" href="UTxO.html#2597" class="Function">∑</a> <a id="3758" class="Symbol">(</a><a id="3759" class="Bound">tx</a> <a id="3762" class="Symbol">.</a><a id="3763" href="UTxO.html#1495" class="Field">outputs</a><a id="3770" class="Symbol">)</a> <a id="3772" href="UTxO.html#748" class="Field">value</a><a id="3777" class="Symbol">)</a>
                 <a id="3796" class="Symbol">(</a><a id="3797" href="UTxO.html#2668" class="Function">∑M</a> <a id="3800" class="Symbol">(</a><a id="3801" href="Data.List.Base.html#1544" class="Function">map</a> <a id="3805" class="Symbol">(</a><a id="3806" href="UTxO.html#2494" class="Function">getSpentOutput</a> <a id="3821" class="Bound">utxos</a><a id="3826" class="Symbol">)</a> <a id="3828" class="Symbol">(</a><a id="3829" class="Bound">tx</a> <a id="3832" class="Symbol">.</a><a id="3833" href="UTxO.html#1468" class="Field">inputs</a><a id="3839" class="Symbol">))</a> <a id="3842" href="UTxO.html#748" class="Field">value</a><a id="3847" class="Symbol">)</a>
<a id="3849" class="Symbol">...</a> <a id="3853" class="Symbol">|</a> <a id="3855" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3858" href="UTxO.html#3858" class="Bound">¬p</a> <a id="3861" class="Symbol">=</a> <a id="3863" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3866" class="Symbol">(</a><a id="3867" href="UTxO.html#3858" class="Bound">¬p</a> <a id="3870" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3872" href="UTxO.html#3069" class="Field">preservesValues</a><a id="3887" class="Symbol">)</a>
<a id="3889" class="Symbol">...</a> <a id="3893" class="Symbol">|</a> <a id="3895" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3899" href="UTxO.html#3899" class="Bound">p₂</a>
  <a id="3904" class="Keyword">with</a> <a id="3909" href="Prelude.DecLists.html#1150" class="Function">unique?</a> <a id="3917" class="Symbol">(</a><a id="3918" href="UTxO.html#2152" class="Function">outputRefs</a> <a id="3929" class="Bound">tx</a><a id="3931" class="Symbol">)</a>
<a id="3933" class="Symbol">...</a> <a id="3937" class="Symbol">|</a> <a id="3939" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3942" href="UTxO.html#3942" class="Bound">¬p</a> <a id="3945" class="Symbol">=</a> <a id="3947" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3950" class="Symbol">(</a><a id="3951" href="UTxO.html#3942" class="Bound">¬p</a> <a id="3954" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3956" href="UTxO.html#3223" class="Field">noDoubleSpending</a><a id="3972" class="Symbol">)</a>
<a id="3974" class="Symbol">...</a> <a id="3978" class="Symbol">|</a> <a id="3980" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3984" href="UTxO.html#3984" class="Bound">p₃</a>
  <a id="3989" class="Keyword">with</a> <a id="3994" href="Data.List.Relation.Unary.All.html#6240" class="Function">all?</a> <a id="3999" class="Symbol">(λ</a> <a id="4002" href="UTxO.html#4002" class="Bound">i</a> <a id="4004" class="Symbol">→</a> <a id="4006" href="Data.Bool.Properties.html#15470" class="Function">T?</a> <a id="4009" class="Symbol">(</a><a id="4010" href="UTxO.html#1193" class="Field">validator</a> <a id="4020" href="UTxO.html#4002" class="Bound">i</a> <a id="4022" class="Symbol">(</a><a id="4023" href="UTxO.html#1555" class="Function">mkTxInfo</a> <a id="4032" class="Bound">tx</a><a id="4034" class="Symbol">)</a> <a id="4036" class="Symbol">(</a><a id="4037" href="UTxO.html#4002" class="Bound">i</a> <a id="4039" class="Symbol">.</a><a id="4040" href="UTxO.html#1234" class="Field">redeemer</a><a id="4048" class="Symbol">)))</a>
            <a id="4064" class="Symbol">(</a><a id="4065" class="Bound">tx</a> <a id="4068" class="Symbol">.</a><a id="4069" href="UTxO.html#1468" class="Field">inputs</a><a id="4075" class="Symbol">)</a>
<a id="4077" class="Symbol">...</a> <a id="4081" class="Symbol">|</a> <a id="4083" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="4086" href="UTxO.html#4086" class="Bound">¬p</a> <a id="4089" class="Symbol">=</a> <a id="4091" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="4094" class="Symbol">(</a><a id="4095" href="UTxO.html#4086" class="Bound">¬p</a> <a id="4098" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="4100" href="UTxO.html#3276" class="Field">allInputsValidate</a><a id="4117" class="Symbol">)</a>
<a id="4119" class="Symbol">...</a> <a id="4123" class="Symbol">|</a> <a id="4125" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="4129" href="UTxO.html#4129" class="Bound">p₄</a>
  <a id="4134" class="Keyword">with</a> <a id="4139" href="Data.List.Relation.Unary.All.html#6240" class="Function">all?</a> <a id="4144" class="Symbol">(λ</a> <a id="4147" href="UTxO.html#4147" class="Bound">i</a> <a id="4149" class="Symbol">→</a> <a id="4151" href="Data.Maybe.Relation.Unary.Any.html#2128" class="Function">M.Any.dec</a> <a id="4161" class="Symbol">(λ</a> <a id="4164" href="UTxO.html#4164" class="Bound">o</a> <a id="4166" class="Symbol">→</a> <a id="4168" href="UTxO.html#4164" class="Bound">o</a> <a id="4170" class="Symbol">.</a><a id="4171" href="UTxO.html#773" class="Field">address</a> <a id="4179" href="Prelude.DecEq.Core.html#141" class="Field Operator">≟</a> <a id="4181" href="UTxO.html#4147" class="Bound">i</a> <a id="4183" class="Symbol">.</a><a id="4184" href="UTxO.html#1193" class="Field">validator</a> <a id="4194" href="UTxO.html#410" class="Postulate Operator">♯</a><a id="4195" class="Symbol">)</a> <a id="4197" class="Symbol">(</a><a id="4198" href="UTxO.html#2494" class="Function">getSpentOutput</a> <a id="4213" class="Bound">utxos</a> <a id="4219" href="UTxO.html#4147" class="Bound">i</a><a id="4220" class="Symbol">))</a>
            <a id="4235" class="Symbol">(</a><a id="4236" class="Bound">tx</a> <a id="4239" class="Symbol">.</a><a id="4240" href="UTxO.html#1468" class="Field">inputs</a><a id="4246" class="Symbol">)</a>
<a id="4248" class="Symbol">...</a> <a id="4252" class="Symbol">|</a> <a id="4254" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="4257" href="UTxO.html#4257" class="Bound">¬p</a> <a id="4260" class="Symbol">=</a> <a id="4262" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="4265" class="Symbol">(</a><a id="4266" href="UTxO.html#4257" class="Bound">¬p</a> <a id="4269" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="4271" href="UTxO.html#3386" class="Field">validateValidHashes</a><a id="4290" class="Symbol">)</a>
<a id="4292" class="Symbol">...</a> <a id="4296" class="Symbol">|</a> <a id="4298" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="4302" href="UTxO.html#4302" class="Bound">p₅</a> <a id="4305" class="Symbol">=</a> <a id="4307" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="4311" class="Keyword">record</a> <a id="4318" class="Symbol">{</a><a id="4319" href="UTxO.html#2993" class="Field">validOutputRefs</a> <a id="4335" class="Symbol">=</a> <a id="4337" class="Bound">p₁</a><a id="4339" class="Symbol">;</a> <a id="4341" href="UTxO.html#3069" class="Field">preservesValues</a> <a id="4357" class="Symbol">=</a> <a id="4359" class="Bound">p₂</a><a id="4361" class="Symbol">;</a> <a id="4363" href="UTxO.html#3223" class="Field">noDoubleSpending</a> <a id="4380" class="Symbol">=</a> <a id="4382" class="Bound">p₃</a><a id="4384" class="Symbol">;</a> <a id="4386" href="UTxO.html#3276" class="Field">allInputsValidate</a> <a id="4404" class="Symbol">=</a> <a id="4406" class="Bound">p₄</a><a id="4408" class="Symbol">;</a> <a id="4410" href="UTxO.html#3386" class="Field">validateValidHashes</a> <a id="4430" class="Symbol">=</a> <a id="4432" href="UTxO.html#4302" class="Bound">p₅</a><a id="4434" class="Symbol">}</a>

<a id="isValidTx"></a><a id="4437" href="UTxO.html#4437" class="Function">isValidTx</a> <a id="4447" class="Symbol">:</a> <a id="4449" href="UTxO.html#1441" class="Record">Tx</a> <a id="4452" class="Symbol">→</a> <a id="4454" href="UTxO.html#1964" class="Function">S</a> <a id="4456" class="Symbol">→</a> <a id="4458" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="4463" href="UTxO.html#4437" class="Function">isValidTx</a> <a id="4473" href="UTxO.html#4473" class="Bound">tx</a> <a id="4476" href="UTxO.html#4476" class="Bound">s</a> <a id="4478" class="Symbol">=</a> <a id="4480" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌊</a> <a id="4482" href="UTxO.html#3544" class="Function">isValidTx?</a> <a id="4493" href="UTxO.html#4473" class="Bound">tx</a> <a id="4496" href="UTxO.html#4476" class="Bound">s</a> <a id="4498" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌋</a>
</pre></body></html>